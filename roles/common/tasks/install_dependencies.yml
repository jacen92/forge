- name: "Install python and python-pip"
  apt:
    pkg: "{{ item }}"
    state: present
    update_cache: true
    cache_valid_time: 3600
  with_items:
    - python2.7
    - python3-pip
    - apt-transport-https
    - ca-certificates
    - curl
    - software-properties-common

- name: "Install pip packages"
  pip:
    name: "{{ item }}"
  with_items:
    - docker-py
    - passlib

- name: "Install docker"
  shell: curl -sSL https://get.docker.com | sh
  when: '"docker-ce" not in ansible_facts.packages'
